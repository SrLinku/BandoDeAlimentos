<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cadastro</title>
    <link rel="stylesheet" href="/css/theme.css" />
    <link rel="stylesheet" href="/css/layout.css" />
    <link rel="stylesheet" href="/css/components.css" />
  </head>
  <body>
    <div class="container" style="max-width: 420px; margin: 60px auto">
      <div id="alerts"></div>
      <div class="card">
        <h2>Criar conta</h2>
        <form id="frmCad">
          <div class="form-grid">
            <div><label>Nome</label><input id="c_nome" required /></div>
            <div><label>Email</label><input id="c_email" type="email" required /></div>
            <div><label>Senha</label><input id="c_senha" type="password" required /></div>
          </div>
          <br />
          <button type="submit" class="btn">Criar</button>
          <a class="btn btn-secondary" href="/">Voltar</a>
          <style>
            .btn,
            .btn.btn-secondary {
              width: 100%;
              display: inline-block;
              text-align: center;
            }
          </style>
        </form>
      </div>
      <script>
        document.getElementById("frmCad").addEventListener("submit", async (e) => {
          e.preventDefault();
          try {
            await api("/api/signup", { method: "POST", body: JSON.stringify({ nome: c_nome.value.trim(), email: c_email.value.trim(), senha: c_senha.value.trim() }) });
            alertBox("success", "Conta criada. Fa√ßa login.");
          } catch (err) {
            alertBox("error", err.message);
          }
        });
      </script>
    </div>
    <script src="/js/app.js"></script>
    <script src="/js/validation.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        if (window.attachValidations) attachValidations();
      });
    </script>
  </body>
</html>
